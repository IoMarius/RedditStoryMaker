services:
  rsm:
    image: 192.168.1.3:5000/rsm:${TAG:-latest}
    deploy:
      mode: replicated
      replicas: 1
      restart_policy:
        condition: on-failure
        max_attempts: 3
      placement:
        constraints:
          - node.role == manager
    volumes:
      - /home/iomarius/docker/rsm:/app/data
    networks:
      - net-mesh
    environment:
      #openai
      GPT_MODEL: gpt-4o-mini
      GPT_API_KEY: your-key

      #elevenlabs tts
      ELEVENLABS_MODEL: eleven_flash_v2_5
      ELEVENLABS_API_KEY: your-key

      #telegram bot key
      TELEGRAM_BOT_TOKEN: your-token

networks:
  net-mesh:
    external: true
